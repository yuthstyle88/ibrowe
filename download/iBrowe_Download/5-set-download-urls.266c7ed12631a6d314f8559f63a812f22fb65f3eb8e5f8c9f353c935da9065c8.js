(()=>{(()=>{function u(){return(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream}function m(){return/Android/.test(navigator.userAgent)}function w(){return!m()&&/Linux|Ubuntu/.test(navigator.userAgent)}function p(){let e=JSON.parse(document.querySelector("meta#js-params").content),r={Android:{key:"android",text:{release:e.downloadBraveForAndroid,beta:e.downloadBetaForAndroid,nightly:e.downloadNightlyForAndroid},notAvailable:e.notAvailableForAndroid,urls:{release:"https://play.google.com/store/apps/details?id=com.brave.browser",beta:"https://play.google.com/store/apps/details?id=com.brave.browser_beta",nightly:"https://play.google.com/store/apps/details?id=com.brave.browser_nightly"},userAgent:"Android|CrOS",buildExceptions:["dev"]},Linux:{key:"linux",text:{release:e.downloadBraveForLinux,nightly:e.downloadNightlyForLinux,beta:e.downloadBetaForLinux},notAvailable:e.notAvailableForLinux,urls:{release:"https://brave.com/linux/#release-channel-installation",nightly:"https://brave.com/linux/#nightly-channel-installation",beta:"https://brave.com/linux/#beta-channel-installation"},userAgent:"Linux|Ubuntu",buildExceptions:["dev"]},macOS:{key:"macos",text:{release:e.downloadBraveForMacOs,nightly:e.downloadNightlyForMacOs,beta:e.downloadBetaForMacOs,dev:e.downloadDevForMacOs},notAvailable:e.notAvailableForMacOs,urls:{release:`${e.downloadUrlBase}/latest/osx`,nightly:`${e.downloadUrlBase}/latest/osx/nightly`,beta:`${e.downloadUrlBase}/latest/osx/beta`,dev:`${e.downloadUrlBase}/latest/osx/dev`},userAgent:"Macintosh",buildExceptions:[]},Windows:{key:"windows",text:{release:e.downloadBraveForWindows,nightly:e.downloadNightlyForWindows,beta:e.downloadBetaForWindows,dev:e.downloadDevForWindows},notAvailable:e.notAvailableForWindows,urls:{release:`${e.downloadUrlBase}/latest/winx64`,nightly:`${e.downloadUrlBase}/latest/winx64/nightly`,beta:`${e.downloadUrlBase}/latest/winx64/beta`,dev:`${e.downloadUrlBase}/latest/winx64/dev`},userAgent:"WOW64|Win64|Windows",buildExceptions:[]},iOS:{key:"ios",text:{release:e.downloadBraveForIOs,beta:e.downloadBetaForIOs},notAvailable:e.notAvailableForIOs,urls:{release:"https://apps.apple.com/app/id1052879175?mt=8",beta:"https://testflight.apple.com/join/Trcbh1o3"},userAgent:"iPhone|iPod|iPad",buildExceptions:["nightly","dev"]}};function l(){return Object.values(r).find(n=>window.navigator.userAgent.match&&window.navigator.userAgent.match(n.userAgent))}function d(n){let t=n.dataset.platform?.toLowerCase();return t?Object.values(r).find(o=>o.key.toLowerCase()===t):null}function s(n){return d(n)||(u()?r.iOS:l())}function i(n){n.forEach(t=>{let o=s(t),a=t.getAttribute("data-build-channel");a==="release"&&t.dataset.allowsDynamicRefCode!=="true"||(o.buildExceptions.includes(a)?(t.textContent=o.notAvailable,t.classList.add("opacity-50","hover:opacity-50"),t.style.pointerEvents="none",t.setAttribute("href","#")):(t.getAttribute("data-show-platform")==="true"&&(t.textContent=o.text[a]),t.setAttribute("href",o.urls[a])),t.classList.remove("opacity-0"),t.classList.remove("invisible"))})}let c=document.querySelectorAll(".download");i(c)}function h(){let e=JSON.parse(document.querySelector("meta#js-params").content),r=[/^\/[a-z]{3}\d{3}\/?$/i,/^\/tips\/?$/,/^\/djmg\/?$/,/^\/sliver\/?$/,/^\/rogan\/?$/,/^\/farnam\/?$/,/^\/brain\/?$/,/^\/ltb\/?$/,/^\/fool\/?$/,/^\/take\/?$/,/^\/realvision\/?$/,/^\/strangeparts\/?$/,/^\/sysk\/?$/,/^\/twit\/?$/,/^\/tim\/?$/,/^\/built\/?$/,/^\/gmdl\/?$/,/^\/realvision\/?$/,/^\/burr\/?$/,/^\/strangeparts\/?$/,/^\/outerheaven\/?$/,/^\/gigz\/?$/,/^\/starsnipe\/?$/,/^\/disrupt\/?$/,/^\/stevemould\/?$/,/^\/de\/chip\/?$/,/^\/r\/[a-z]{3}\d{3}\/?$/i];function l(){return document.documentElement.dataset.staticRefCode||r.some(t=>t.test(location.pathname))}function d(t){return["beta","dev","nightly"].includes(t)}function s(){let t="";if(!window.URLSearchParams)t=location.search.match(/(?:\?|&)ref=([A-Za-z]{3}-?[0-9]{3})(?:\/|$|&)/);else{let o=new URLSearchParams(location.search);t=o.get("ref")&&o.get("ref").match(/^([A-Za-z]{3}-?[0-9]{3})(?:\/|$)/)}if(t)return t[1];if(/^\/[A-Za-z]{3}-?[0-9]{3}\/?$/.test(location.pathname))return location.pathname.substring(1)}function i(){let t=[{refCode:"BRV010",pattern:/^www\.google\.(com|[a-zA-Z]{2}|co\.[a-zA-Z]{2})$/},{refCode:"BRV011",pattern:/^www\.bing\.com$/},{refCode:"BRV012",pattern:/^([a-zA-Z]{2}\.|r\.)*search\.yahoo\.(com|[a-zA-Z]{2}|co\.[a-zA-Z]{2})$/},{refCode:"BRV013",pattern:/^.*search\.brave\.com$/},{refCode:"BRV014",pattern:/^(www\.)*duckduckgo\.com$/},{refCode:"BRV015",pattern:/^(www\.)*(chatgpt\.com|perplexity\.ai|claude\.ai|gemini\.google\.com|copilot\.microsoft\.com|chat\.mistral\.ai|you\.com|jasper\.ai)$/},{refCode:"BRV029",pattern:/^(www\.)*(baidu\.com|(ya\.ru|yandex\.(com|[a-zA-Z]{2}))|ask\.(com|[a-zA-Z]{2})|naver\.com|coccoc\.com|ecosia\.org|qwant\.com)$/},{refCode:"BRV030",pattern:/^(support|community)*\.*brave\.com$/},{refCode:"BRV031",pattern:/^basicattentiontoken\.org$/},{refCode:"BRV050",pattern:/^(www|t|l)*\.*(x|twitter|instagram|facebook|tiktok|youtube|linkedin|reddit)*\.co(m)*$/}],o=document.referrer&&new URL(document.referrer),a=t.find(f=>f.pattern.test(o?.hostname));return a?a.refCode:document.referrer&&!document.referrer.startsWith(location.origin)?"BRV040":"BRV002"}function c(t){document.querySelectorAll("[data-allows-dynamic-ref-code='true']").forEach(a=>{let f=a.dataset.platform==="ios"||u()?`${e.downloadUrlBase}/download/ios/${t}`:a.dataset.platform==="android"||m()?`${e.downloadUrlBase}/download/android/${t}`:`${e.downloadUrlBase}/download/${t}`;!d(a.dataset.buildChannel)&&a.dataset.allowsDynamicRefCode&&(a.href=f)})}function n(){if(!l()){let t=s();if(t)c(t);else{let o=i();c(o)}}}n()}g();async function g(){let{bitness:e}=await navigator.userAgentData?.getHighEntropyValues(["bitness"])||{};function r(){e&&!w()&&!u()&&!m()&&document.querySelectorAll(".download").forEach(s=>{let i=new URL(s.href);i.searchParams.set("bitness",e),s.href=i.toString()})}p(),h(),r();let l=new CustomEvent("downloadPlatformSet");document.dispatchEvent(l)}})();})();
